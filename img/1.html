<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>dbo_points</title>
        <script src="http://maps.api.2gis.ru/2.0/loader.js"></script>
    </head>
    <body>
    <div id="map" style="width: 100%; height: 600px;"></div>
    <script>
        function getRandomColor() {
            var letters = '0123456789ABCDEF'.split('');
            var color = '#';
            for (var i = 0; i < 6; i++ ) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }
            DG.then(function() {
                var map,
                    coordinates,
                    polyline;
                map = DG.map('map', {
                    center: [55.036446, 82.897983],
                    zoom: 7
                });
                coordinates = {{coordinates}};
                point = {{point}}; 
                graph = {{graph}};
                for (var i = 0; i < coordinates.length; i++) {
                    polyline = DG.polyline(coordinates[i], {
                        color: '#5f1d1d',
                        weight: 2
                    }).addTo(map);
                    map.fitBounds(polyline.getBounds());
                };
                DG.marker([55.8115, 37.6901], {
                    label : 'заправка!'
                }).addTo(map);
                for (var i = 0; i < point.length; i++) {
                    DG.circle(point[i], 2, {
                        color: '#2e0303',
                        weight: 4
                    }).addTo(map);
                };
                for (var i = 0; i < graph.length; i++) {
                    polyline = DG.polyline(graph[i], {
                        color: '#ff4e50',
                        weight: 3
                    }).addTo(map);
                    map.fitBounds(polyline.getBounds());
                };
            });
        </script>
    </body>
</html>
